<Window x:Class="OverlayApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
        mc:Ignorable="d"
        Title="Arc Raiders Overlay"
        Height="900"
        Width="1400"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        ResizeMode="CanResize"
        ShowInTaskbar="False"
        Topmost="True"
        Background="Transparent"
        Loaded="OnWindowLoaded"
        SourceInitialized="OnSourceInitialized"
        Closing="OnWindowClosing"
        SizeChanged="OnWindowSizeChanged"
        LocationChanged="OnWindowLocationChanged"
        StateChanged="OnWindowStateChanged">
    <Window.Resources>
        <DropShadowEffect x:Key="OverlayShadow"
                          BlurRadius="18"
                          ShadowDepth="0"
                          Color="#66000000" />
    </Window.Resources>

    <Grid>
        <Border x:Name="ChromeBorder"
                Margin="12"
                CornerRadius="20"
                Background="#10000000"
                BorderBrush="#30FFFFFF"
                BorderThickness="1"
                Effect="{StaticResource OverlayShadow}">
            <Grid Margin="0" Background="Transparent">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

                <Border x:Name="HeaderBar"
                    Grid.Row="0"
                    Background="#66000000"
                    Padding="14"
                    CornerRadius="20,20,0,0"
                    MouseLeftButtonDown="OnHeaderMouseDown">
                <DockPanel>
                    <StackPanel DockPanel.Dock="Left">
                        <TextBlock Text="ArcTracker Overlay"
                                   FontSize="18"
                                   FontWeight="Bold"
                                   Foreground="#F0FFFFFF" />
                        <TextBlock x:Name="HotkeyHintText"
                                   Foreground="#CCFFFFFF"
                                   FontSize="12"
                                   Margin="0,4,0,0"
                                   Text="" />
                    </StackPanel>

                    <StackPanel DockPanel.Dock="Right" Orientation="Horizontal" VerticalAlignment="Center">
                        <Button Content="Reload"
                            Padding="12,4"
                            Margin="0,0,8,0"
                            Click="OnReloadRequested"
                            ToolTip="Reload the website" />
                        <ToggleButton x:Name="ClickThroughToggle"
                                  Width="130"
                                  Padding="12,4"
                                  Margin="0,0,8,0"
                                  Checked="OnClickThroughChecked"
                                  Unchecked="OnClickThroughUnchecked"
                                  Content="Click-through"
                                  ToolTip="Toggle click-through mode (Ctrl+Alt+T)" />
                        <Button Content="Settings"
                                Padding="12,4"
                                Margin="0,0,8,0"
                                Click="OnSettingsRequested"
                                ToolTip="Configure hotkeys and behavior" />
                        <Button Content="Close"
                            Padding="12,4"
                            Click="OnCloseRequested"
                            ToolTip="Close the application" />
                    </StackPanel>
                </DockPanel>
            </Border>

            <wv2:WebView2 x:Name="OverlayView"
                          Grid.Row="1"
                          DefaultBackgroundColor="Transparent"
                          HorizontalAlignment="Stretch"
                          VerticalAlignment="Stretch"
                          IsHitTestVisible="True" />
            </Grid>
        </Border>
    </Grid>
</Window>
